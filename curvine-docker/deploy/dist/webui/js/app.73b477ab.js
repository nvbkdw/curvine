(function(){"use strict";var e={3053:function(e,a,t){var s=t(5130),r=t(6768),l=t(4232);const i={class:"App h-100"},o={class:"w-100 sticky-top header-wrapper"},c={key:0,class:"alert alert-danger fade show"},n=(0,r.Lk)("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"x",-1),d={class:"w-100 pt-5 mt-3 pb-4 mb-2"},u={class:"w-100 footer-wrapper"};function v(e,a,t,s,v,k){const h=(0,r.g2)("Header"),p=(0,r.g2)("router-view"),f=(0,r.g2)("Footer");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",o,[(0,r.bF)(h)]),v.errmsg?((0,r.uX)(),(0,r.CE)("div",c,[n,(0,r.eW)(" "+(0,l.v_)(v.errmsg),1)])):(0,r.Q3)("",!0),(0,r.Lk)("div",d,[(0,r.bF)(p)]),(0,r.Lk)("div",u,[(0,r.bF)(f)])])}var k=t.p+"img/logo.2ca0582f.svg",h=t.p+"img/curvine_font_white.870fc692.svg";const p=e=>((0,r.Qi)("data-v-c2a7a6ea"),e=e(),(0,r.jt)(),e),f={class:"header"},L={class:"navbar navbar-expand-lg tech-navbar"},b={class:"container-fluid"},g=(0,r.Fv)('<div class="brand" data-v-c2a7a6ea><a class="navbar-brand tech-brand" href="#" data-v-c2a7a6ea><div class="logo-container" data-v-c2a7a6ea><img src="'+k+'" alt="Curvine" class="logo-icon" data-v-c2a7a6ea><div class="logo-glow" data-v-c2a7a6ea></div></div><img src="'+h+'" alt="CURVINE Distributed Cache" class="brand-logo" data-v-c2a7a6ea></a></div>',1),m={class:"tabs"},y={class:"nav tech-nav"},_={class:"nav-item"},w=p((()=>(0,r.Lk)("i",{class:"nav-icon"},"📊",-1))),C=p((()=>(0,r.Lk)("span",null,"Overview",-1))),E={class:"nav-item"},B=p((()=>(0,r.Lk)("i",{class:"nav-icon"},"📁",-1))),A=p((()=>(0,r.Lk)("span",null,"Browse",-1))),F={class:"nav-item"},S=p((()=>(0,r.Lk)("i",{class:"nav-icon"},"⚡",-1))),D=p((()=>(0,r.Lk)("span",null,"Workers",-1))),R={class:"nav-item"},X=p((()=>(0,r.Lk)("i",{class:"nav-icon"},"⚙️",-1))),W=p((()=>(0,r.Lk)("span",null,"Configuration",-1))),T={class:"auto-refresh"},I={class:"btn-content"},P=p((()=>(0,r.Lk)("span",{class:"btn-text"},"Auto Refresh",-1))),Q={class:"btn-status"};function M(e,a,t,s,i,o){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",f,[(0,r.Lk)("nav",L,[(0,r.Lk)("div",b,[g,(0,r.Lk)("div",m,[(0,r.Lk)("ul",y,[(0,r.Lk)("li",_,[(0,r.bF)(c,{class:(0,l.C4)(["nav-link tech-nav-link",{active:"Overview"===e.$route.name}]),to:"/overview"},{default:(0,r.k6)((()=>[w,C])),_:1},8,["class"])]),(0,r.Lk)("li",E,[(0,r.bF)(c,{class:(0,l.C4)(["nav-link tech-nav-link",{active:"Browse"===e.$route.name}]),to:"/browse"},{default:(0,r.k6)((()=>[B,A])),_:1},8,["class"])]),(0,r.Lk)("li",F,[(0,r.bF)(c,{class:(0,l.C4)(["nav-link tech-nav-link",{active:"Workers"===e.$route.name}]),to:"/workers"},{default:(0,r.k6)((()=>[S,D])),_:1},8,["class"])]),(0,r.Lk)("li",R,[(0,r.bF)(c,{class:(0,l.C4)(["nav-link tech-nav-link",{active:"Config"===e.$route.name}]),to:"/config"},{default:(0,r.k6)((()=>[X,W])),_:1},8,["class"])])])]),(0,r.Lk)("div",T,[(0,r.Lk)("button",{type:"button",class:(0,l.C4)(["btn tech-btn",{active:i.autoRefresh}]),onClick:a[0]||(a[0]=(...e)=>o.toggleAutoRefresh&&o.toggleAutoRefresh(...e))},[(0,r.Lk)("div",I,[(0,r.Lk)("div",{class:(0,l.C4)(["status-indicator",{active:i.autoRefresh}])},null,2),P,(0,r.Lk)("span",Q,(0,l.v_)(i.autoRefresh?"ON":"OFF"),1)])],2)])])])])}var G=t(595);const N=(0,G.A)();var U=N,x={name:"Header",data(){return{autoRefresh:!1,refreshInterval:null,refreshIntervalMs:5e3}},methods:{toggleAutoRefresh(){this.autoRefresh=!this.autoRefresh,this.autoRefresh?this.startAutoRefresh():this.stopAutoRefresh(),this.$emit("auto-refresh-changed",this.autoRefresh),localStorage.setItem("curvine-auto-refresh",this.autoRefresh.toString())},startAutoRefresh(){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=setInterval((()=>{this.triggerRefresh()}),this.refreshIntervalMs)},stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)},triggerRefresh(){U.emit("auto-refresh-trigger"),this.$emit("refresh-triggered")},loadAutoRefreshPreference(){const e=localStorage.getItem("curvine-auto-refresh");null!==e&&(this.autoRefresh="true"===e,this.autoRefresh&&this.startAutoRefresh())}},mounted(){this.loadAutoRefreshPreference()},beforeUnmount(){this.stopAutoRefresh()}},$=t(1241);const O=(0,$.A)(x,[["render",M],["__scopeId","data-v-c2a7a6ea"]]);var j=O;const H={class:"footer mt-auto navbar-dark bg-primary"},V=(0,r.Lk)("ul",{class:"justify-content-center nav"},null,-1),z=[V];function q(e,a,t,s,l,i){return(0,r.uX)(),(0,r.CE)("div",H,z)}var K={name:"Footer"};const J=(0,$.A)(K,[["render",q]]);var Y=J,Z={name:"App",components:{Header:j,Footer:Y},data(){return{errmsg:this.$store.state.errmsg}}};const ee=(0,$.A)(Z,[["render",v]]);var ae=ee,te=t(1387);const se=e=>((0,r.Qi)("data-v-e89f327a"),e=e(),(0,r.jt)(),e),re={class:"overview"},le={class:"container-fluid"},ie={class:"status-header"},oe={class:"status-card"},ce={class:"status-icon"},ne=se((()=>(0,r.Lk)("div",{class:"pulse-ring"},null,-1))),de={class:"status-info"},ue={class:"cluster-status"},ve={class:"cluster-id"},ke={class:"uptime-card"},he=se((()=>(0,r.Lk)("div",{class:"uptime-label"},"UPTIME",-1))),pe={class:"uptime-value"},fe={class:"dashboard-grid"},Le={class:"tech-card system-info"},be=se((()=>(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h3",{class:"card-title"},[(0,r.Lk)("i",{class:"title-icon"},"🖥️"),(0,r.eW)(" SYSTEM INFORMATION ")])],-1))),ge={class:"card-content"},me={class:"info-grid"},ye={class:"info-item"},_e=se((()=>(0,r.Lk)("span",{class:"info-label"},"Master Address",-1))),we={class:"info-value"},Ce=se((()=>(0,r.Lk)("div",{class:"info-item"},[(0,r.Lk)("span",{class:"info-label"},"Version"),(0,r.Lk)("span",{class:"info-value version-badge"},"v1.0.0")],-1))),Ee={class:"info-item"},Be=se((()=>(0,r.Lk)("span",{class:"info-label"},"Started",-1))),Ae={class:"info-value"},Fe={class:"tech-card workers-status"},Se=se((()=>(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h3",{class:"card-title"},[(0,r.Lk)("i",{class:"title-icon"},"⚡"),(0,r.eW)(" WORKERS STATUS ")])],-1))),De={class:"card-content"},Re={class:"workers-grid"},Xe={class:"worker-stat"},We={class:"stat-number running"},Te=se((()=>(0,r.Lk)("div",{class:"stat-label"},"Running",-1))),Ie={class:"stat-bar"},Pe={class:"worker-stat"},Qe={class:"stat-number lost"},Me=se((()=>(0,r.Lk)("div",{class:"stat-label"},"Lost",-1))),Ge={class:"stat-bar"},Ne={class:"worker-stat"},Ue={class:"stat-number capacity"},xe=se((()=>(0,r.Lk)("div",{class:"stat-label"},"Total Capacity",-1))),$e=se((()=>(0,r.Lk)("div",{class:"stat-bar"},[(0,r.Lk)("div",{class:"stat-fill capacity",style:{width:"100%"}})],-1))),Oe={class:"tech-card storage-usage"},je=se((()=>(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h3",{class:"card-title"},[(0,r.Lk)("i",{class:"title-icon"},"💾"),(0,r.eW)(" STORAGE METRICS ")])],-1))),He={class:"card-content"},Ve={class:"storage-grid"},ze={class:"storage-item"},qe=se((()=>(0,r.Lk)("div",{class:"storage-icon"},"📁",-1))),Ke={class:"storage-info"},Je={class:"storage-value"},Ye=se((()=>(0,r.Lk)("div",{class:"storage-label"},"Total Files",-1))),Ze={class:"storage-item"},ea=se((()=>(0,r.Lk)("div",{class:"storage-icon"},"📂",-1))),aa={class:"storage-info"},ta={class:"storage-value"},sa=se((()=>(0,r.Lk)("div",{class:"storage-label"},"Directories",-1))),ra=(0,r.Fv)('<div class="storage-item" data-v-e89f327a><div class="storage-icon" data-v-e89f327a>🧊</div><div class="storage-info" data-v-e89f327a><div class="storage-value" data-v-e89f327a>0</div><div class="storage-label" data-v-e89f327a>Unique Blocks</div></div></div><div class="storage-item" data-v-e89f327a><div class="storage-icon" data-v-e89f327a>🔄</div><div class="storage-info" data-v-e89f327a><div class="storage-value" data-v-e89f327a>0</div><div class="storage-label" data-v-e89f327a>Replica Blocks</div></div></div>',2),la={class:"tech-card capacity-usage"},ia=se((()=>(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h3",{class:"card-title"},[(0,r.Lk)("i",{class:"title-icon"},"📊"),(0,r.eW)(" CAPACITY UTILIZATION ")])],-1))),oa={class:"card-content"},ca={class:"capacity-chart"},na={class:"capacity-ring"},da={viewBox:"0 0 100 100",class:"capacity-svg"},ua=se((()=>(0,r.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"capacity-bg"},null,-1))),va=["stroke-dasharray","stroke-dashoffset"],ka={class:"capacity-center"},ha={class:"capacity-percentage"},pa=se((()=>(0,r.Lk)("div",{class:"capacity-label"},"Total Used",-1))),fa={class:"capacity-details"},La={class:"capacity-detail"},ba=se((()=>(0,r.Lk)("span",{class:"detail-label"},"Available",-1))),ga={class:"detail-value available"},ma={class:"capacity-detail"},ya=se((()=>(0,r.Lk)("span",{class:"detail-label"},"FS Used",-1))),_a={class:"detail-value fs-used"},wa={class:"capacity-detail"},Ca=se((()=>(0,r.Lk)("span",{class:"detail-label"},"System Used",-1))),Ea={class:"detail-value system-used"},Ba={class:"capacity-detail"},Aa=se((()=>(0,r.Lk)("span",{class:"detail-label"},"Reserved",-1))),Fa={class:"detail-value reserved"},Sa={class:"capacity-detail"},Da=se((()=>(0,r.Lk)("span",{class:"detail-label"},"Total",-1))),Ra={class:"detail-value total"};function Xa(e,a,t,s,i,o){return(0,r.uX)(),(0,r.CE)("div",re,[(0,r.Lk)("div",le,[(0,r.Lk)("div",ie,[(0,r.Lk)("div",oe,[(0,r.Lk)("div",ce,[ne,(0,r.Lk)("div",{class:(0,l.C4)(["status-dot",{active:"Active"===i.data.master_state}])},null,2)]),(0,r.Lk)("div",de,[(0,r.Lk)("p",ue,(0,l.v_)(i.data.master_state||"Unknown"),1),(0,r.Lk)("p",ve,"ID: "+(0,l.v_)(i.data.cluster_id||"N/A"),1)])]),(0,r.Lk)("div",ke,[he,(0,r.Lk)("div",pe,(0,l.v_)(o.formatUptime(i.data.start_time)),1)])]),(0,r.Lk)("div",fe,[(0,r.Lk)("div",Le,[be,(0,r.Lk)("div",ge,[(0,r.Lk)("div",me,[(0,r.Lk)("div",ye,[_e,(0,r.Lk)("span",we,(0,l.v_)(i.data.master_addr||"N/A"),1)]),Ce,(0,r.Lk)("div",Ee,[Be,(0,r.Lk)("span",Ae,(0,l.v_)(o.formatDate(i.data.start_time)),1)])])])]),(0,r.Lk)("div",Fe,[Se,(0,r.Lk)("div",De,[(0,r.Lk)("div",Re,[(0,r.Lk)("div",Xe,[(0,r.Lk)("div",We,(0,l.v_)(i.data.live_workers||0),1),Te,(0,r.Lk)("div",Ie,[(0,r.Lk)("div",{class:"stat-fill running",style:(0,l.Tr)({width:o.getWorkerPercentage("running")+"%"})},null,4)])]),(0,r.Lk)("div",Pe,[(0,r.Lk)("div",Qe,(0,l.v_)(i.data.lost_workers||0),1),Me,(0,r.Lk)("div",Ge,[(0,r.Lk)("div",{class:"stat-fill lost",style:(0,l.Tr)({width:o.getWorkerPercentage("lost")+"%"})},null,4)])]),(0,r.Lk)("div",Ne,[(0,r.Lk)("div",Ue,(0,l.v_)(o.toGB(i.data.capacity)||0)+"GB",1),xe,$e])])])]),(0,r.Lk)("div",Oe,[je,(0,r.Lk)("div",He,[(0,r.Lk)("div",Ve,[(0,r.Lk)("div",ze,[qe,(0,r.Lk)("div",Ke,[(0,r.Lk)("div",Je,(0,l.v_)(o.formatNumber(i.data.files_total)),1),Ye])]),(0,r.Lk)("div",Ze,[ea,(0,r.Lk)("div",aa,[(0,r.Lk)("div",ta,(0,l.v_)(o.formatNumber(i.data.dir_total)),1),sa])]),ra])])]),(0,r.Lk)("div",la,[ia,(0,r.Lk)("div",oa,[(0,r.Lk)("div",ca,[(0,r.Lk)("div",na,[((0,r.uX)(),(0,r.CE)("svg",da,[ua,(0,r.Lk)("circle",{cx:"50",cy:"50",r:"45",class:"capacity-fill","stroke-dasharray":o.getCapacityDashArray(),"stroke-dashoffset":o.getCapacityDashOffset()},null,8,va)])),(0,r.Lk)("div",ka,[(0,r.Lk)("div",ha,(0,l.v_)(o.getCapacityPercentage())+"%",1),pa])]),(0,r.Lk)("div",fa,[(0,r.Lk)("div",La,[ba,(0,r.Lk)("span",ga,(0,l.v_)(o.toGB(i.data.available))+"GB",1)]),(0,r.Lk)("div",ma,[ya,(0,r.Lk)("span",_a,(0,l.v_)(o.toGBPrecise(i.data.fs_used))+"GB",1)]),(0,r.Lk)("div",wa,[Ca,(0,r.Lk)("span",Ea,(0,l.v_)(o.toGB(o.getNonFsUsed()))+"GB",1)]),(0,r.Lk)("div",Ba,[Aa,(0,r.Lk)("span",Fa,(0,l.v_)(o.toGBPrecise(i.data.reserved_bytes||0))+"GB",1)]),(0,r.Lk)("div",Sa,[Da,(0,r.Lk)("span",Ra,(0,l.v_)(o.toGB(i.data.capacity))+"GB",1)])])])])])])])])}var Wa=t(4373),Ta=t(782);const Ia=(0,Ta.y$)({state:{errmsg:""},getters:{errmsg:e=>e.errmsg},mutations:{SET_ERRMSG:(e,a)=>{e.errmsg=a}},actions:{},modules:{}});var Pa=Ia;const Qa=Wa.A.create({baseURL:"/api",timeout:1e4});Qa.interceptors.request.use((e=>e),(e=>{console.log(e),Pa.commit("SET_ERRMSG",e),Promise.reject(e)})),Qa.interceptors.response.use((e=>e),(e=>{console.log("request err: "+e);let a="";if(e&&e.response)switch(e.response.status){case 401:a="UnAuthorized Request";break;case 403:a="Request Reject";break;case 404:a="Request URI Not Found";break;case 408:a="Request Timeout";break;case 500:a="Internal service error";break;case 501:a="Not support service";break;case 502:a="Gateway Error";break;case 503:a="Service temporary unavailable";break;case 504:a="Gateway Timeout";break;case 505:a="HTTP version not support";break;default:a=e.response.data.msg;break}else a=e;return console.log(a),Pa.commit("SET_ERRMSG",e),Promise.reject(a)}));var Ma=Qa;function Ga(){return Ma({url:"/overview",method:"get"})}function Na(){return Ma({url:"/config",method:"get"})}function Ua(e){return Ma({url:"/browse",method:"get",params:e})}function xa(){return Ma({url:"/workers",method:"get"})}function $a(e){return Ma({url:"/block_locations",method:"get",params:e})}var Oa={name:"OverviewPage",data(){return{data:{master_addr:"",cluster_id:"",start_time:"",master_state:"",live_workers:0,lost_workers:0,capacity:0,available:0,fs_used:0,files_total:0,dir_total:0,reserved_bytes:0},loading:!1}},created(){this.fetchData()},mounted(){U.on("auto-refresh-trigger",this.handleAutoRefresh)},beforeUnmount(){U.off("auto-refresh-trigger",this.handleAutoRefresh)},methods:{handleAutoRefresh(){this.fetchData()},fetchData(){this.loading=!0,Ga().then((e=>{this.data=e.data,this.loading=!1})).catch((()=>{this.loading=!1}))},toGB(e){return e?(e/1024/1024/1024).toFixed(2):0},toGBPrecise(e){return e?(e/1024/1024/1024).toFixed(4):0},formatNumber(e){return e?e.toLocaleString():"0"},formatBytes(e){if(!e)return"0 B";const a=["B","KB","MB","GB","TB"],t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+a[t]},formatDate(e){return e?new Date(e).toLocaleString():"N/A"},formatUptime(e){if(!e)return"N/A";const a=new Date(e),t=new Date,s=t-a,r=Math.floor(s/864e5),l=Math.floor(s%864e5/36e5),i=Math.floor(s%36e5/6e4);return`${r}d ${l}h ${i}m`},getWorkerPercentage(e){const a=(this.data.live_workers||0)+(this.data.lost_workers||0);return 0===a?0:"running"===e?Math.round(this.data.live_workers/a*100):"lost"===e?Math.round(this.data.lost_workers/a*100):100},getCapacityPercentage(){if(!this.data.capacity||0===this.data.capacity)return 0;const e=this.data.capacity-this.data.available;return Math.round(e/this.data.capacity*100)},getCapacityDashArray(){const e=2*Math.PI*45;return`${e} ${e}`},getCapacityDashOffset(){const e=2*Math.PI*45,a=this.getCapacityPercentage();return e-a/100*e},getNonFsUsed(){return this.data.capacity&&0!==this.data.capacity?Math.max(0,this.data.capacity-this.data.available-this.data.fs_used):0}}};const ja=(0,$.A)(Oa,[["render",Xa],["__scopeId","data-v-e89f327a"]]);var Ha=ja;const Va={class:"configuration-page"},za={class:"container-fluid"},qa={class:"row"},Ka=(0,r.Lk)("div",{class:"col-6"},[(0,r.Lk)("h5",null,"Curvine Configuration")],-1),Ja={class:"search-container col-6"},Ya={class:"col-12"},Za={class:"table table-hover"},et=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Property"),(0,r.Lk)("th",null,"Value")])],-1),at={class:"mb-0"},tt={key:1},st=(0,r.Lk)("tr",null,[(0,r.Lk)("td",null," not found matched properties.")],-1),rt=[st];function lt(e,a,t,i,o,c){const n=(0,r.gN)("loading");return(0,r.bo)(((0,r.uX)(),(0,r.CE)("div",Va,[(0,r.Lk)("div",za,[(0,r.Lk)("div",qa,[Ka,(0,r.Lk)("div",Ja,[(0,r.bo)((0,r.Lk)("input",{id:"searchConfig",placeholder:"Search by Property",type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e)},null,512),[[s.Jo,o.searchQuery]])]),(0,r.Lk)("div",Ya,[(0,r.Lk)("table",Za,[et,c.filteredData.length>0?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)(c.filteredData,(e=>((0,r.uX)(),(0,r.CE)("tbody",{key:e.key},[(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,[(0,r.Lk)("pre",at,[(0,r.Lk)("code",null,(0,l.v_)(e.key),1)])]),(0,r.Lk)("td",null,(0,l.v_)(e.value),1)])])))),128)):o.searchQuery?((0,r.uX)(),(0,r.CE)("tbody",tt,rt)):(0,r.Q3)("",!0)])])])])])),[[n,o.loading]])}t(4114);var it={name:"Config",components:{},data(){return{loading:!1,data:[],searchQuery:""}},created(){this.fetchData()},mounted(){U.on("auto-refresh-trigger",this.handleAutoRefresh)},beforeUnmount(){U.off("auto-refresh-trigger",this.handleAutoRefresh)},computed:{filteredData(){return this.data.filter((e=>e.key.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{handleAutoRefresh(){this.fetchData()},fetchData(){this.loading=!0,this.data=[],Na().then((e=>{this.flattenData(e.data),this.loading=!1})).catch((e=>{console.error("fetch config data error: "+e),this.loading=!1}))},flattenData(e,a=""){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let s=a?`${a}.${t}`:t;"object"!==typeof e[t]||Array.isArray(e[t])?this.data.push({key:s,value:e[t]}):this.flattenData(e[t],s)}}}};const ot=(0,$.A)(it,[["render",lt]]);var ct=ot;const nt=e=>((0,r.Qi)("data-v-44ebcb5a"),e=e(),(0,r.jt)(),e),dt={class:"browse-page"},ut={class:"path-navigation"},vt=(0,r.Fv)('<div class="nav-header" data-v-44ebcb5a><div class="nav-title" data-v-44ebcb5a><div class="title-icon" data-v-44ebcb5a>📁</div><h2 data-v-44ebcb5a>File System Browser</h2></div><div class="nav-controls" data-v-44ebcb5a><a class="nav-btn root-btn" href="/browse?path=/" data-v-44ebcb5a><span class="btn-icon" data-v-44ebcb5a>🏠</span><span class="btn-text" data-v-44ebcb5a>Root</span></a></div></div>',1),kt={class:"path-input-section"},ht={class:"input-group"},pt=nt((()=>(0,r.Lk)("div",{class:"input-label"},[(0,r.Lk)("span",{class:"label-icon"},"📍"),(0,r.Lk)("span",{class:"label-text"},"Current Path")],-1))),ft={class:"input-wrapper"},Lt=["href"],bt=nt((()=>(0,r.Lk)("span",{class:"go-icon"},"🚀",-1))),gt=nt((()=>(0,r.Lk)("span",{class:"go-text"},"Navigate",-1))),mt=[bt,gt],yt={class:"file-browser"},_t={class:"browser-header"},wt={class:"header-info"},Ct={class:"item-count"},Et={class:"current-path"},Bt=nt((()=>(0,r.Lk)("div",{class:"view-options"},[(0,r.Lk)("div",{class:"view-toggle active"},[(0,r.Lk)("span",{class:"toggle-icon"},"⊞"),(0,r.Lk)("span",{class:"toggle-text"},"Grid View")])],-1))),At={key:0,class:"files-grid"},Ft={class:"file-header"},St={class:"file-icon"},Dt={key:0,class:"icon-wrapper directory"},Rt=nt((()=>(0,r.Lk)("svg",{class:"icon",viewBox:"0 0 512 512"},[(0,r.Lk)("path",{fill:"currentColor",d:"M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"})],-1))),Xt=nt((()=>(0,r.Lk)("div",{class:"icon-glow"},null,-1))),Wt=[Rt,Xt],Tt={key:1,class:"icon-wrapper file"},It=nt((()=>(0,r.Lk)("svg",{class:"icon",viewBox:"0 0 384 512"},[(0,r.Lk)("path",{fill:"currentColor",d:"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"})],-1))),Pt=nt((()=>(0,r.Lk)("div",{class:"icon-glow"},null,-1))),Qt=[It,Pt],Mt={class:"file-type-badge"},Gt={key:0,class:"badge directory"},Nt={key:1,class:"badge file"},Ut={class:"file-name"},xt=["href"],$t=["href"],Ot={class:"file-details"},jt={key:0,class:"detail-row"},Ht=nt((()=>(0,r.Lk)("span",{class:"detail-label"},"Size",-1))),Vt={class:"detail-value"},zt={key:1,class:"detail-row"},qt=nt((()=>(0,r.Lk)("span",{class:"detail-label"},"Block Size",-1))),Kt={class:"detail-value"},Jt={key:2,class:"detail-row"},Yt=nt((()=>(0,r.Lk)("span",{class:"detail-label"},"Children",-1))),Zt={class:"detail-value"},es={key:3,class:"detail-row"},as=nt((()=>(0,r.Lk)("span",{class:"detail-label"},"Replicas",-1))),ts={class:"detail-value"},ss={class:"file-metadata"},rs={class:"metadata-row"},ls=nt((()=>(0,r.Lk)("span",{class:"metadata-label"},"Modified",-1))),is={class:"metadata-value"},os={key:0,class:"metadata-row"},cs=nt((()=>(0,r.Lk)("span",{class:"metadata-label"},"Complete",-1))),ns={key:1,class:"metadata-row"},ds=nt((()=>(0,r.Lk)("span",{class:"metadata-label"},"Storage",-1))),us={class:"metadata-value storage-type"},vs={key:1,class:"empty-state"},ks=nt((()=>(0,r.Lk)("div",{class:"empty-icon"},"📂",-1))),hs=nt((()=>(0,r.Lk)("div",{class:"empty-text"},"Directory is empty",-1))),ps=nt((()=>(0,r.Lk)("div",{class:"empty-subtext"},"No files or folders found in this location",-1))),fs=[ks,hs,ps];function Ls(e,a,t,i,o,c){const n=(0,r.gN)("loading");return(0,r.bo)(((0,r.uX)(),(0,r.CE)("div",dt,[(0,r.Lk)("div",ut,[vt,(0,r.Lk)("div",kt,[(0,r.Lk)("div",ht,[pt,(0,r.Lk)("div",ft,[(0,r.bo)((0,r.Lk)("input",{id:"browsePath","onUpdate:modelValue":a[0]||(a[0]=e=>o.browsePath=e),type:"text",class:"path-input",placeholder:"Enter file system path..."},null,512),[[s.Jo,o.browsePath]]),(0,r.Lk)("a",{class:"go-btn",href:`/browse?path=${o.browsePath}`},mt,8,Lt)])])])]),(0,r.Lk)("div",yt,[(0,r.Lk)("div",_t,[(0,r.Lk)("div",wt,[(0,r.Lk)("span",Ct,(0,l.v_)(o.data.length)+" items",1),(0,r.Lk)("span",Et,(0,l.v_)(o.browsePath),1)]),Bt]),o.data&&o.data.length>0?((0,r.uX)(),(0,r.CE)("div",At,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.data,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,l.C4)(["file-item",{"is-directory":e.is_dir,"is-file":!e.is_dir}])},[(0,r.Lk)("div",Ft,[(0,r.Lk)("div",St,[e.is_dir?((0,r.uX)(),(0,r.CE)("div",Dt,Wt)):((0,r.uX)(),(0,r.CE)("div",Tt,Qt))]),(0,r.Lk)("div",Mt,[e.is_dir?((0,r.uX)(),(0,r.CE)("span",Gt,"DIR")):((0,r.uX)(),(0,r.CE)("span",Nt,"FILE"))])]),(0,r.Lk)("div",Ut,[e.is_dir?((0,r.uX)(),(0,r.CE)("a",{key:0,href:`/browse?path=${e.path.replace("//","/")}`,class:"file-link directory"},(0,l.v_)(c.getFileName(e.path)),9,xt)):((0,r.uX)(),(0,r.CE)("a",{key:1,href:`/blocks?path=${e.path.replace("//","/")}`,class:"file-link file"},(0,l.v_)(c.getFileName(e.path)),9,$t))]),(0,r.Lk)("div",Ot,[e.is_dir?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",jt,[Ht,(0,r.Lk)("span",Vt,(0,l.v_)(c.formatFileSize(e.len)),1)])),e.is_dir?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",zt,[qt,(0,r.Lk)("span",Kt,(0,l.v_)(c.formatFileSize(e.block_size)),1)])),e.is_dir?((0,r.uX)(),(0,r.CE)("div",Jt,[Yt,(0,r.Lk)("span",Zt,(0,l.v_)(e.children_num||0),1)])):(0,r.Q3)("",!0),e.is_dir?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",es,[as,(0,r.Lk)("span",ts,(0,l.v_)(e.replicas||0),1)]))]),(0,r.Lk)("div",ss,[(0,r.Lk)("div",rs,[ls,(0,r.Lk)("span",is,(0,l.v_)(i.formatTimestamp(e.mtime)),1)]),e.is_dir?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",os,[cs,(0,r.Lk)("span",{class:(0,l.C4)(["metadata-value",{complete:e.is_complete,incomplete:!e.is_complete}])},(0,l.v_)(e.is_complete?"✓":"✗"),3)])),!e.is_dir&&e.storage_policy?((0,r.uX)(),(0,r.CE)("div",ns,[ds,(0,r.Lk)("span",us,(0,l.v_)(e.storage_policy.storage_type||"N/A"),1)])):(0,r.Q3)("",!0)])],2)))),128))])):((0,r.uX)(),(0,r.CE)("div",vs,fs))])])),[[n,o.loading]])}function bs(e){const a=new Date(e),t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0"),l=String(a.getHours()).padStart(2,"0"),i=String(a.getMinutes()).padStart(2,"0"),o=String(a.getSeconds()).padStart(2,"0");return`${t}-${s}-${r} ${l}:${i}:${o}`}function gs(e){return(e/1024/1024/1024).toFixed(2)}var ms={name:"Browse",setup(){return{formatTimestamp:bs}},data(){return{loading:!1,data:[],browsePath:this.$route.query.path||"/"}},created(){this.loading=!0,this.fetchBrowseData(),this.loading=!1},mounted(){U.on("auto-refresh-trigger",this.handleAutoRefresh)},beforeUnmount(){U.off("auto-refresh-trigger",this.handleAutoRefresh)},methods:{handleAutoRefresh(){this.fetchBrowseData()},fetchBrowseData(){Ua({path:this.browsePath}).then((e=>{this.data=e.data})).catch((e=>{console.error("fetch browse data error: "+e)}))},getFileName(e){if(!e)return"";const a=e.split("/");return a[a.length-1]||a[a.length-2]||e},formatFileSize(e){if(!e||0===e)return"0 B";const a=1024,t=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,s)).toFixed(2))+" "+t[s]}}};const ys=(0,$.A)(ms,[["render",Ls],["__scopeId","data-v-44ebcb5a"]]);var _s=ys;const ws=e=>((0,r.Qi)("data-v-0f24950d"),e=e(),(0,r.jt)(),e),Cs={class:"workers"},Es={class:"workers-section"},Bs={class:"section-header"},As={class:"section-title"},Fs=ws((()=>(0,r.Lk)("div",{class:"title-icon"},"🟢",-1))),Ss=ws((()=>(0,r.Lk)("h2",null,"Live Workers",-1))),Ds={class:"worker-count"},Rs={class:"section-stats"},Xs={class:"stat-item"},Ws=ws((()=>(0,r.Lk)("span",{class:"stat-label"},"Total Capacity",-1))),Ts={class:"stat-value"},Is={class:"stat-item"},Ps=ws((()=>(0,r.Lk)("span",{class:"stat-label"},"Available",-1))),Qs={class:"stat-value available"},Ms={class:"search-section"},Gs={class:"search-container"},Ns={class:"search-box"},Us=ws((()=>(0,r.Lk)("i",{class:"search-icon"},"🔍",-1))),xs={class:"search-stats"},$s={class:"search-result-count"},Os={key:0,class:"workers-table"},js={class:"table-header"},Hs={class:"table-row header-row"},Vs={key:0,class:"sort-icon"},zs={key:0,class:"sort-icon"},qs={key:0,class:"sort-icon"},Ks={key:0,class:"sort-icon"},Js={key:0,class:"sort-icon"},Ys={key:0,class:"sort-icon"},Zs={key:0,class:"sort-icon"},er={key:0,class:"sort-icon"},ar={key:0,class:"sort-icon"},tr={class:"table-body"},sr=ws((()=>(0,r.Lk)("div",{class:"table-cell status-cell"},[(0,r.Lk)("div",{class:"status-indicator online"},[(0,r.Lk)("div",{class:"pulse-dot"})])],-1))),rr={class:"table-cell worker-id-cell"},lr={class:"worker-id"},ir={class:"table-cell hostname-cell"},or={class:"hostname"},cr={class:"port"},nr={class:"table-cell ip-cell"},dr={class:"ip-address"},ur={class:"table-cell heartbeat-cell"},vr={class:"heartbeat"},kr={class:"table-cell capacity-cell"},hr={class:"capacity"},pr={class:"table-cell available-cell"},fr={class:"available"},Lr={class:"table-cell used-cell"},br={class:"used"},gr={class:"table-cell usage-cell"},mr={class:"usage-bar"},yr={class:"usage-track"},_r={class:"usage-text"},wr={key:1,class:"empty-state"},Cr=ws((()=>(0,r.Lk)("div",{class:"empty-icon"},"📡",-1))),Er=ws((()=>(0,r.Lk)("div",{class:"empty-text"},"No live workers found",-1))),Br=[Cr,Er],Ar={class:"workers-section lost-section"},Fr={class:"section-header"},Sr={class:"section-title"},Dr=ws((()=>(0,r.Lk)("div",{class:"title-icon"},"🔴",-1))),Rr=ws((()=>(0,r.Lk)("h2",null,"Lost Workers",-1))),Xr={class:"worker-count lost"},Wr={key:0,class:"section-stats"},Tr={class:"stat-item"},Ir=ws((()=>(0,r.Lk)("span",{class:"stat-label"},"Lost Capacity",-1))),Pr={class:"stat-value lost"},Qr={key:0,class:"workers-table"},Mr={class:"table-header"},Gr={class:"table-row header-row"},Nr={key:0,class:"sort-icon"},Ur={key:0,class:"sort-icon"},xr={key:0,class:"sort-icon"},$r={key:0,class:"sort-icon"},Or={key:0,class:"sort-icon"},jr={key:0,class:"sort-icon"},Hr={key:0,class:"sort-icon"},Vr={key:0,class:"sort-icon"},zr={key:0,class:"sort-icon"},qr={class:"table-body"},Kr=ws((()=>(0,r.Lk)("div",{class:"table-cell status-cell"},[(0,r.Lk)("div",{class:"status-indicator offline"})],-1))),Jr={class:"table-cell worker-id-cell"},Yr={class:"worker-id"},Zr={class:"table-cell hostname-cell"},el={class:"hostname"},al={class:"port"},tl={class:"table-cell ip-cell"},sl={class:"ip-address"},rl={class:"table-cell heartbeat-cell"},ll={class:"heartbeat"},il={class:"table-cell capacity-cell"},ol={class:"capacity"},cl={class:"table-cell available-cell"},nl={class:"available"},dl={class:"table-cell used-cell"},ul={class:"used"},vl={class:"table-cell usage-cell"},kl={class:"usage-bar"},hl={class:"usage-track"},pl={class:"usage-text"},fl={key:1,class:"empty-state"},Ll=ws((()=>(0,r.Lk)("div",{class:"empty-icon"},"✅",-1))),bl=ws((()=>(0,r.Lk)("div",{class:"empty-text"},"No lost workers - All systems operational",-1))),gl=[Ll,bl];function ml(e,a,t,i,o,c){const n=(0,r.gN)("loading");return(0,r.bo)(((0,r.uX)(),(0,r.CE)("div",Cs,[(0,r.Lk)("div",Es,[(0,r.Lk)("div",Bs,[(0,r.Lk)("div",As,[Fs,Ss,(0,r.Lk)("div",Ds,(0,l.v_)(c.filteredLiveWorkers.length),1)]),(0,r.Lk)("div",Rs,[(0,r.Lk)("div",Xs,[Ws,(0,r.Lk)("span",Ts,(0,l.v_)(c.getTotalCapacity(o.data.live_workers))+"GB",1)]),(0,r.Lk)("div",Is,[Ps,(0,r.Lk)("span",Qs,(0,l.v_)(c.getTotalAvailable(o.data.live_workers))+"GB",1)])])]),(0,r.Lk)("div",Ms,[(0,r.Lk)("div",Gs,[(0,r.Lk)("div",Ns,[Us,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchQuery=e),type:"text",placeholder:"Search workers by ID, hostname, or IP address...",class:"search-input"},null,512),[[s.Jo,o.searchQuery]]),o.searchQuery?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"clear-search",onClick:a[1]||(a[1]=(...e)=>c.clearSearch&&c.clearSearch(...e))},"✕")):(0,r.Q3)("",!0)]),(0,r.Lk)("div",xs,[(0,r.Lk)("span",$s,(0,l.v_)(c.filteredLiveWorkers.length+c.filteredLostWorkers.length)+" workers found",1)])])]),c.filteredLiveWorkers.length>0?((0,r.uX)(),(0,r.CE)("div",Os,[(0,r.Lk)("div",js,[(0,r.Lk)("div",Hs,[(0,r.Lk)("div",{class:"table-cell status-cell sortable",onClick:a[2]||(a[2]=e=>c.sortBy("status"))},[(0,r.eW)(" Status "),"status"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Vs,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell worker-id-cell sortable",onClick:a[3]||(a[3]=e=>c.sortBy("worker_id"))},[(0,r.eW)(" Worker ID "),"worker_id"===o.sortField?((0,r.uX)(),(0,r.CE)("span",zs,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell hostname-cell sortable",onClick:a[4]||(a[4]=e=>c.sortBy("hostname"))},[(0,r.eW)(" Hostname "),"hostname"===o.sortField?((0,r.uX)(),(0,r.CE)("span",qs,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell ip-cell sortable",onClick:a[5]||(a[5]=e=>c.sortBy("ip_addr"))},[(0,r.eW)(" IP Address "),"ip_addr"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Ks,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell heartbeat-cell sortable",onClick:a[6]||(a[6]=e=>c.sortBy("heartbeat"))},[(0,r.eW)(" Last Heartbeat "),"heartbeat"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Js,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell capacity-cell sortable",onClick:a[7]||(a[7]=e=>c.sortBy("capacity"))},[(0,r.eW)(" Capacity "),"capacity"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Ys,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell available-cell sortable",onClick:a[8]||(a[8]=e=>c.sortBy("available"))},[(0,r.eW)(" Available "),"available"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Zs,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell used-cell sortable",onClick:a[9]||(a[9]=e=>c.sortBy("used"))},[(0,r.eW)(" Used "),"used"===o.sortField?((0,r.uX)(),(0,r.CE)("span",er,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell usage-cell sortable",onClick:a[10]||(a[10]=e=>c.sortBy("usage"))},[(0,r.eW)(" Usage "),"usage"===o.sortField?((0,r.uX)(),(0,r.CE)("span",ar,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",tr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.filteredLiveWorkers,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.address.worker_id,class:"table-row worker-row live"},[sr,(0,r.Lk)("div",rr,[(0,r.Lk)("span",lr,(0,l.v_)(e.address.worker_id),1)]),(0,r.Lk)("div",ir,[(0,r.Lk)("span",or,(0,l.v_)(e.address.hostname),1),(0,r.Lk)("span",cr,":"+(0,l.v_)(e.address.rpc_port),1)]),(0,r.Lk)("div",nr,[(0,r.Lk)("span",dr,(0,l.v_)(e.address.ip_addr),1)]),(0,r.Lk)("div",ur,[(0,r.Lk)("span",vr,(0,l.v_)(i.formatTimestamp(e.last_update)),1)]),(0,r.Lk)("div",kr,[(0,r.Lk)("span",hr,(0,l.v_)(i.toGB(e.capacity))+"GB",1)]),(0,r.Lk)("div",pr,[(0,r.Lk)("span",fr,(0,l.v_)(i.toGB(e.available))+"GB",1)]),(0,r.Lk)("div",Lr,[(0,r.Lk)("span",br,(0,l.v_)(i.toGB(e.fs_used))+"GB",1)]),(0,r.Lk)("div",gr,[(0,r.Lk)("div",mr,[(0,r.Lk)("div",yr,[(0,r.Lk)("div",{class:"usage-fill",style:(0,l.Tr)({width:c.getUsagePercentage(e)+"%"})},null,4)]),(0,r.Lk)("span",_r,(0,l.v_)(c.getUsagePercentage(e))+"%",1)])])])))),128))])])):((0,r.uX)(),(0,r.CE)("div",wr,Br))]),(0,r.Lk)("div",Ar,[(0,r.Lk)("div",Fr,[(0,r.Lk)("div",Sr,[Dr,Rr,(0,r.Lk)("div",Xr,(0,l.v_)(c.filteredLostWorkers.length),1)]),o.data.lost_workers&&o.data.lost_workers.length>0?((0,r.uX)(),(0,r.CE)("div",Wr,[(0,r.Lk)("div",Tr,[Ir,(0,r.Lk)("span",Pr,(0,l.v_)(c.getTotalCapacity(o.data.lost_workers))+"GB",1)])])):(0,r.Q3)("",!0)]),c.filteredLostWorkers.length>0?((0,r.uX)(),(0,r.CE)("div",Qr,[(0,r.Lk)("div",Mr,[(0,r.Lk)("div",Gr,[(0,r.Lk)("div",{class:"table-cell status-cell sortable",onClick:a[11]||(a[11]=e=>c.sortBy("status"))},[(0,r.eW)(" Status "),"status"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Nr,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell worker-id-cell sortable",onClick:a[12]||(a[12]=e=>c.sortBy("worker_id"))},[(0,r.eW)(" Worker ID "),"worker_id"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Ur,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell hostname-cell sortable",onClick:a[13]||(a[13]=e=>c.sortBy("hostname"))},[(0,r.eW)(" Hostname "),"hostname"===o.sortField?((0,r.uX)(),(0,r.CE)("span",xr,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell ip-cell sortable",onClick:a[14]||(a[14]=e=>c.sortBy("ip_addr"))},[(0,r.eW)(" IP Address "),"ip_addr"===o.sortField?((0,r.uX)(),(0,r.CE)("span",$r,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell heartbeat-cell sortable",onClick:a[15]||(a[15]=e=>c.sortBy("heartbeat"))},[(0,r.eW)(" Last Heartbeat "),"heartbeat"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Or,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell capacity-cell sortable",onClick:a[16]||(a[16]=e=>c.sortBy("capacity"))},[(0,r.eW)(" Capacity "),"capacity"===o.sortField?((0,r.uX)(),(0,r.CE)("span",jr,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell available-cell sortable",onClick:a[17]||(a[17]=e=>c.sortBy("available"))},[(0,r.eW)(" Available "),"available"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Hr,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell used-cell sortable",onClick:a[18]||(a[18]=e=>c.sortBy("used"))},[(0,r.eW)(" Used "),"used"===o.sortField?((0,r.uX)(),(0,r.CE)("span",Vr,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",{class:"table-cell usage-cell sortable",onClick:a[19]||(a[19]=e=>c.sortBy("usage"))},[(0,r.eW)(" Usage "),"usage"===o.sortField?((0,r.uX)(),(0,r.CE)("span",zr,(0,l.v_)("asc"===o.sortDirection?"↑":"↓"),1)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",qr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.filteredLostWorkers,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.address.worker_id,class:"table-row worker-row lost"},[Kr,(0,r.Lk)("div",Jr,[(0,r.Lk)("span",Yr,(0,l.v_)(e.address.worker_id),1)]),(0,r.Lk)("div",Zr,[(0,r.Lk)("span",el,(0,l.v_)(e.address.hostname),1),(0,r.Lk)("span",al,":"+(0,l.v_)(e.address.rpc_port),1)]),(0,r.Lk)("div",tl,[(0,r.Lk)("span",sl,(0,l.v_)(e.address.ip_addr),1)]),(0,r.Lk)("div",rl,[(0,r.Lk)("span",ll,(0,l.v_)(i.formatTimestamp(e.last_update)),1)]),(0,r.Lk)("div",il,[(0,r.Lk)("span",ol,(0,l.v_)(i.toGB(e.capacity))+"GB",1)]),(0,r.Lk)("div",cl,[(0,r.Lk)("span",nl,(0,l.v_)(i.toGB(e.available))+"GB",1)]),(0,r.Lk)("div",dl,[(0,r.Lk)("span",ul,(0,l.v_)(i.toGB(e.fs_used))+"GB",1)]),(0,r.Lk)("div",vl,[(0,r.Lk)("div",kl,[(0,r.Lk)("div",hl,[(0,r.Lk)("div",{class:"usage-fill",style:(0,l.Tr)({width:c.getUsagePercentage(e)+"%"})},null,4)]),(0,r.Lk)("span",pl,(0,l.v_)(c.getUsagePercentage(e))+"%",1)])])])))),128))])])):((0,r.uX)(),(0,r.CE)("div",fl,gl))])])),[[n,o.loading]])}var yl={name:"Workers",setup(){return{toGB:gs,formatTimestamp:bs}},data(){return{loading:!1,data:{},live_workers:[],lost_workers:[],searchQuery:"",sortField:"",sortDirection:"asc"}},computed:{filteredLiveWorkers(){if(!this.data.live_workers)return[];let e=this.data.live_workers;if(this.searchQuery.trim()){const a=this.searchQuery.toLowerCase().trim();e=e.filter((e=>String(e.address.worker_id).toLowerCase().includes(a)||String(e.address.hostname).toLowerCase().includes(a)||String(e.address.ip_addr).toLowerCase().includes(a)))}return this.sortWorkers(e)},filteredLostWorkers(){if(!this.data.lost_workers)return[];let e=this.data.lost_workers;if(this.searchQuery.trim()){const a=this.searchQuery.toLowerCase().trim();e=e.filter((e=>String(e.address.worker_id).toLowerCase().includes(a)||String(e.address.hostname).toLowerCase().includes(a)||String(e.address.ip_addr).toLowerCase().includes(a)))}return this.sortWorkers(e)}},created(){this.loading=!0,this.fetchWorkersData(),this.loading=!1},mounted(){U.on("auto-refresh-trigger",this.handleAutoRefresh)},beforeUnmount(){U.off("auto-refresh-trigger",this.handleAutoRefresh)},methods:{handleAutoRefresh(){this.fetchWorkersData()},clearSearch(){this.searchQuery=""},sortBy(e){this.sortField===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortField=e,this.sortDirection="asc")},getSortValue(e,a){switch(a){case"status":return e.status||"";case"worker_id":return e.address.worker_id;case"hostname":return e.address.hostname||"";case"ip_addr":return e.address.ip_addr||"";case"heartbeat":return e.last_update?new Date(e.last_update).getTime():0;case"capacity":return e.capacity||0;case"available":return e.available||0;case"used":return e.fs_used||0;case"usage":return this.getUsagePercentage(e);default:return""}},sortWorkers(e){return this.sortField&&e?[...e].sort(((e,a)=>{const t=this.getSortValue(e,this.sortField),s=this.getSortValue(a,this.sortField);let r=0;return r="string"===typeof t&&"string"===typeof s?t.localeCompare(s):t-s,"asc"===this.sortDirection?r:-r})):e},fetchWorkersData(){xa().then((e=>{this.data=e.data})).catch((e=>{console.error("fetch browse data error: "+e)}))},getTotalCapacity(e){return e&&0!==e.length?this.toGB(e.reduce(((e,a)=>e+a.capacity),0)):0},getTotalAvailable(e){return e&&0!==e.length?this.toGB(e.reduce(((e,a)=>e+a.available),0)):0},getUsagePercentage(e){return e.capacity&&0!==e.capacity?Math.round(e.fs_used/e.capacity*100):0}}};const _l=(0,$.A)(yl,[["render",ml],["__scopeId","data-v-0f24950d"]]);var wl=_l;const Cl={class:"block-page"},El={class:"container-fluid"},Bl={class:"row"},Al=(0,r.Lk)("div",{class:"col-6"},[(0,r.Lk)("h5",null,"File Block Locations")],-1),Fl={class:"col-12"},Sl={class:"table table-hover"},Dl=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"ID"),(0,r.Lk)("th",null,"Block Size"),(0,r.Lk)("th",null,"File Type"),(0,r.Lk)("th",null,"Storage Type"),(0,r.Lk)("th",null,"Locations")])],-1);function Rl(e,a,t,s,i,o){const c=(0,r.gN)("loading");return(0,r.bo)(((0,r.uX)(),(0,r.CE)("div",Cl,[(0,r.Lk)("div",El,[(0,r.Lk)("div",Bl,[Al,(0,r.Lk)("div",Fl,[(0,r.Lk)("table",Sl,[Dl,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.data,(e=>((0,r.uX)(),(0,r.CE)("tbody",{key:e},[(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,(0,l.v_)(e.block.id),1),(0,r.Lk)("td",null,(0,l.v_)(e.block.block_size),1),(0,r.Lk)("td",null,(0,l.v_)(e.block.file_type),1),(0,r.Lk)("td",null,(0,l.v_)(e.block.storage_type),1),(0,r.Lk)("td",null,(0,l.v_)(e.locs),1)])])))),128))])])])])])),[[c,i.loading]])}var Xl={name:"Blocks",components:{},data(){return{loading:!1,data:[],path:this.$route.query.path}},created(){this.loading=!0,$a({path:this.path}).then((e=>{let a=e.data.block_ids;for(const t of a){let a=e.data.block_locs[t].block,s=e.data.block_locs[t].locs;this.data.push({block:a,locs:s.map((e=>e.hostname+"_"+e.rpc_port)).join(", ")})}})).catch((e=>{console.error("fetch block data error: "+e)})),this.loading=!1}};const Wl=(0,$.A)(Xl,[["render",Rl]]);var Tl=Wl;const Il=[{path:"/",redirect:"/overview"},{path:"/overview",name:"overview",component:Ha},{path:"/config",name:"config",component:ct},{path:"/browse",name:"browse",component:_s},{path:"/workers",name:"workers",component:wl},{path:"/blocks",name:"blocks",component:Tl},{path:"/about",name:"about",component:()=>t.e(594).then(t.bind(t,4918))}],Pl=(0,te.aE)({linkActiveClass:"active",history:(0,te.LA)("/"),routes:Il});var Ql=Pl,Ml=t.p+"img/curvine.9acf457e.svg";const Gl={className:"loadingMessageWrapper"},Nl=(0,r.Lk)("div",{className:"loadingMessage text-center"},[(0,r.Lk)("img",{className:"loadingMessageSpin",src:Ml}),(0,r.Lk)("br"),(0,r.Lk)("h5",{className:""},"Please wait...")],-1),Ul=[Nl];function xl(e,a,t,s,l,i){return(0,r.uX)(),(0,r.CE)("div",Gl,Ul)}var $l={name:"HelloWorld",onMounted(){document.body.style.overflow="hidden"},onUnmounted(){document.body.style.overflow=""}};const Ol=(0,$.A)($l,[["render",xl]]);var jl=Ol;const Hl={mounted(e,a){const t=(0,s.Ef)(jl),r=t.mount(document.createElement("div"));e.instance=r,a.value&&Vl(e)},updated(e,a){a.value!==a.oldValue&&(a.value?Vl(e):zl(e))},unmounted(e){zl(e)}};function Vl(e){const a=getComputedStyle(e);"static"===a.position&&(e.style.position="relative"),e.appendChild(e.instance.$el)}function zl(e){e.instance&&e.instance.$el.parentNode===e&&e.removeChild(e.instance.$el)}var ql=Hl;(0,s.Ef)(ae).use(Pa).use(Ql).directive("loading",ql).mount("#app")}},a={};function t(s){var r=a[s];if(void 0!==r)return r.exports;var l=a[s]={exports:{}};return e[s].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,s,r,l){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],l=e[d][2];for(var o=!0,c=0;c<s.length;c++)(!1&l||i>=l)&&Object.keys(t.O).every((function(e){return t.O[e](s[c])}))?s.splice(c--,1):(o=!1,l<i&&(i=l));if(o){e.splice(d--,1);var n=r();void 0!==n&&(a=n)}}return a}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[s,r,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,s){return t.f[s](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/about.58b88ca9.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="curvine:";t.l=function(s,r,l,i){if(e[s])e[s].push(r);else{var o,c;if(void 0!==l)for(var n=document.getElementsByTagName("script"),d=0;d<n.length;d++){var u=n[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==a+l){o=u;break}}o||(c=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,t.nc&&o.setAttribute("nonce",t.nc),o.setAttribute("data-webpack",a+l),o.src=s),e[s]=[r];var v=function(a,t){o.onerror=o.onload=null,clearTimeout(k);var r=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(e){return e(t)})),a)return a(t)},k=setTimeout(v.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=v.bind(null,o.onerror),o.onload=v.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.f.j=function(a,s){var r=t.o(e,a)?e[a]:void 0;if(0!==r)if(r)s.push(r[2]);else{var l=new Promise((function(t,s){r=e[a]=[t,s]}));s.push(r[2]=l);var i=t.p+t.u(a),o=new Error,c=function(s){if(t.o(e,a)&&(r=e[a],0!==r&&(e[a]=void 0),r)){var l=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+a+" failed.\n("+l+": "+i+")",o.name="ChunkLoadError",o.type=l,o.request=i,r[1](o)}};t.l(i,c,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,s){var r,l,i=s[0],o=s[1],c=s[2],n=0;if(i.some((function(a){return 0!==e[a]}))){for(r in o)t.o(o,r)&&(t.m[r]=o[r]);if(c)var d=c(t)}for(a&&a(s);n<i.length;n++)l=i[n],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},s=self["webpackChunkcurvine"]=self["webpackChunkcurvine"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=t.O(void 0,[504],(function(){return t(3053)}));s=t.O(s)})();
//# sourceMappingURL=app.73b477ab.js.map